// Generated by CoffeeScript 1.9.0
/*
 * Modal
 * https://github.com/laurentguilbert/modal
 * Copyright (c) 2015 Laurent Guilbert
 * Released under the MIT license.
 */
(function(){$(function(){"use strict";var o,t;t={appendTo:"body",fadeIn:100,keyboardClose:!0,overlay:!0,overlayClose:!0,closeButton:!0,closeButtonTemplate:'<div class="modal-close"><span class="modal-close-icon"></span></div>',keyboardYes:!0,yesText:"Yes",noText:"No",modalConfirmationTemplate:'<div class="modal" data-role="confirmation"><div class="modal-content"></div><div class="modal-buttons"><button class="modal-no"></button><button class="modal-yes"></button></div> </div>',notificationDuration:5e3,modalNotificationTemplate:'<div class="modal" data-role="notification"><div class="modal-content"></div></div>'},o=function(){function o(o){this.defaults=t,this.options=$.extend(t,o),$(document).on("keydown",function(o){return function(t){switch(t.keyCode){case 27:if(o.options.keyboardClose)return o.close();break;case 13:if(null!=o.$yesButton&&o.$yesButton.is(":visible")&&o.options.keyboardYes)return o.$yesButton.trigger("click")}}}(this)),this.options.overlay&&(this.$overlay=$('<div class="modal-overlay">').css({display:"none",position:"fixed",top:0,left:0,height:"100%",width:"100%",zIndex:1e3,backgroundColor:"black",opacity:.7}),this.options.overlayClose&&this.$overlay.on("click",function(o){return function(){return o.close()}}(this)),$(this.options.appendTo).append(this.$overlay),$("[data-modal-trigger]").on("click",function(o){return function(t){var n;return n=$(t.target).data("modal-trigger"),o.show(n)}}(this)))}return o.prototype._open=function(o){var t;return this.options.closeButton&&!o.find(".modal-close").length&&(t=$(this.options.closeButtonTemplate).css({position:"absolute",right:"10px",top:"10px"}),t.on("click",function(o){return function(){return o.close()}}(this)),o.append(t)),o.css({left:"-200%",position:"fixed",top:"50%",zIndex:1001}),o.show(),o.css({marginLeft:-o.outerWidth()/2,marginTop:-o.outerHeight()/2}),o.hide(),o.css("left","50%"),o.fadeIn(this.options.fadeIn)},o.prototype.confirm=function(o){null==this.$modalConfirmation&&(this.$modalConfirmation=$(this.options.modalConfirmationTemplate).hide(),this.$yesButton=this.$modalConfirmation.find(".modal-yes"),this.$noButton=this.$modalConfirmation.find(".modal-no"),$(this.options.appendTo).append(this.$modalConfirmation)),this.$yesButton.off("click"),this.$yesButton.on("click",function(t){return function(){return null!=o.yesCallback&&o.yesCallback(),t.close()}}(this)),this.$noButton.off("click"),this.$noButton.on("click",function(t){return function(){return null!=o.noCallback&&o.noCallback(),t.close()}}(this)),this.$modalConfirmation.find(".modal-content").html(o.content||""),this.$yesButton.html(o.yesText||this.options.yesText),this.$noButton.html(o.noText||this.options.noText),this.options.overlay&&this.$overlay.fadeIn(this.options.fadeIn),this._open(this.$modalConfirmation)},o.prototype.notify=function(o){var t;return null==this.$modalNotification&&(this.$modalNotification=$(this.options.modalNotificationTemplate).css({display:"none",position:"absolute",top:"50%",zIndex:1002}),$(this.options.appendTo).append(this.$modalNotification)),this.$modalNotification.attr("data-level",o.level||"info"),this.$modalNotification.find(".modal-content").html(o.content||""),this._open(this.$modalNotification),t=function(o){return function(){return o.$modalNotification.fadeOut(o.options.notificationFadeout)}}(this),setTimeout(t,this.options.notificationDuration)},o.prototype.show=function(o){var t;return t=$('[data-modal="'+o+'"]'),t.length?(this.options.overlay&&this.$overlay.fadeIn(this.options.fadeIn),this._open(t)):void 0},o.prototype.close=function(){$(".modal,[data-modal]").hide(),this.options.overlay&&this.$overlay.hide()},o}(),window.Modal||(window.Modal=new o("undefined"!=typeof modalOptions&&null!==modalOptions?modalOptions:{}))})}).call(this);
